## 2.4 IP 주소

### 2.4.1 ARP(Address Resolution Protocol)

+ 주소 결정 프로토콜 (네트워크 상에서 IP주소를 물리적 네트워크 주소로 대응시키기 위해 사용하는 프로토콜)
+ `ARP` : 논리 주소 -> 물리 주소 (가상 주소인 IP를 실제 주소인 MAC 주소로 변환)
+ `RARP` : 물리 주소 -> 논리 주소 (실제 MAC 주소를 가상 주소인 IP로 변환)
+ `MAC 주소` : 인터넷 가능한 장비(TCP/IP 통신을 하는)가 가지고 있는 물리적 주소
+ `유니캐스트` : 목적지 주소를 하나만 적어 특정 한 PC에 보내는 방식 (1대1)
+ `브로드캐스트` : 도메인(영역) 안에 있는 모든 PC에 데이터 전달. CPU에 인터럽트를 걸기 때문에 수신 측에서 PC 성능에 영향을 받을 수 있다
+ `멀티캐스트` : 원하는 그룹에만 전송하는 방식. 유니캐스트보다 적은 네트워크 부하를 가지고 멀티캐스트로 인한 수신 불필요. PC에서의 CPU 성능에 영향을 끼치진 않는다
+ `애니캐스트` : 가장 가까운 Node와 통신
+ `IPv4` : 유니캐스트, 멀티캐스트, 브로드캐스트
+ `IPv6` : 유니캐스트, 멀티캐스트, 애니캐스트



### 2.4.2 홉바이홉 통신

+ IP를 통해 통신하는 과정
+ 각 라우터에 있는 라우팅 테이블의 IP를 기반으로 패킷을 전달하고 다시 전달해나감
+ 통신 장치에 있는 '라우팅 테이블'의 IP를 통해 시작 주소부터 시작하여 다음 IP로 계속해서 이동하는 '라우팅' 과정을 거쳐 패킷이 최종 목적지까지 도달하는 통신

![img](https://thebook.io/img/080326/107.jpg)

#### + 라우팅 테이블

+ 송신지에서 수신지까지 도달하기 위해 사용
+ 게이트와 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야하는 다음 라우터의 정보를 가지고 있다



#### + 게이트웨이

+ 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간 통신을 가능케 하는 컴퓨터나 소프트웨어

![img](https://thebook.io/img/080326/108_1.jpg)



### 2.4.3 IP 주소 체계

`IPv4` : 32비트를 8비트 단위로 점을 찍어 표기

`IPv6` : 64비트를 16 단위로 점 찍어 표기

![img](https://thebook.io/img/080326/109.jpg)

#### + 클래스 기반 할당 방식

: A, B, C, D, E 다섯개 클래스로 구분하는 방식

: A, B, C는 일대일 통신, D는 멀티캐스트 통신, E는 예비용

![img](https://thebook.io/img/080326/110_1.jpg)

: 네트워크의 첫 번째 주소는 네트워크 구별 주소, 마지막 주소는 브로드캐스트용 주소로 사용

ex) 클래스 A로 12.0.0.0이란 네트워크 부여 받으면, 

12.0.0.0 = 네트워크 구별주소

12.0.0.1~ 12.255.255.254 = 호스트 주소 부여 가능 주소

12.255.255.255 = 브로드캐스트용 주소

:  위 방식은 사용 주소보다 버리는 주소가 많은 단점



#### + DHCP(Dynamic Host Configuration Protocol)

+ IP 주소 및 기타 통신 매개변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜
+ 인터넷 접속시 자동으로 IP주소 할당 가능



#### + NAT(Network Address Translation)

+ 패킷이 라우팅 장치를 통해 전송되는 동안 패킷의 IP 주소를 수정하여 다른 주소로 매핑하는 방법
+ IPv4 만으로 많은 주소를 감당하지 못하는데, NAT을 사용하여 공인 IP와 사설 IP로 나눠 처리 가능
+ ex) ICS, RRAS, Netfilter

 ![img](https://thebook.io/img/080326/112.jpg)

 : 직원들은 서로 다른 사설 IP 주소를 사용하지만 NAT를 통해 하나의 공인 IP인 121.165.151.200을 활용한다

+ 공유기 : 인터넷 회선 하나를 개통하고 공유기를 사용하여 여러 PC 연결할 수 있는데, 공유기에 NAT가 탑재되어 있어서이다
+ NAT를 활용한 보안 : 내부 네트워크 IP 주소와 외부에 드러나는 IP 주소를 다르게 유지할 수 있어 어느정도 보안 가능
+ NAT 단점 : 여러 명이 동시에 접속하므로 접속 속도가 느려질 수 있다는 단점

